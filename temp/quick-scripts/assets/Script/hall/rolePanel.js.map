{"version":3,"sources":["rolePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\hall","sourcesContent":["import { playerRes } from \"../game/gameRes\"\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(sp.Skeleton)\r\n    contraShow: sp.Skeleton = null;\r\n    @property(cc.Node)\r\n    contraNode: cc.Node = null\r\n    @property(cc.Node)\r\n    heroItem: cc.Node = null\r\n    @property(cc.Node)\r\n    weaponItem: cc.Node = null\r\n    @property(cc.SpriteAtlas)\r\n    heroSPA: cc.SpriteAtlas = null\r\n\r\n\r\n    private showHeroIndex: any = null;\r\n    private heros: any[] = null;\r\n    private weapons: any[] = null;\r\n    onLoad() {\r\n        this.showHeroIndex = 0;\r\n        this.heros=playerRes.heroNames\r\n        this.weapons=playerRes.contraGunName\r\n\r\n        this.initHerosList()\r\n        this.initWeaponList()\r\n        this.initContraShow(this.heros[0])\r\n    }\r\n\r\n    /**\r\n     * 初始化英雄列表\r\n     */\r\n    initHerosList(){\r\n        cc.find(\"choiceHero/view/content\",this.node).active=true\r\n\r\n        for(let index=0;index<this.heros.length;index++){\r\n            let _item=cc.instantiate(this.heroItem)\r\n\r\n            if(index==0){\r\n                _item.getComponent(cc.Toggle).isChecked=true\r\n            } \r\n\r\n            _item.getChildByName('headAltar').getComponent(cc.Sprite).spriteFrame=this.heroSPA.getSpriteFrame('head_'+this.heros[index])\r\n            _item.getChildByName('name').getComponent(cc.Label).string=this.heros[index]\r\n            _item.active=true\r\n            _item.getComponent(cc.Button).clickEvents[0].customEventData=this.heros[index]\r\n            //cc.log(_item.getComponent(cc.Button))\r\n            _item.parent=cc.find(\"choiceHero/view/content\",this.node)\r\n        }\r\n        \r\n    }\r\n\r\n     /**\r\n     * 初始化武器列表\r\n     */\r\n    initWeaponList(){\r\n        cc.find(\"choiceWeapon/view/content\",this.node).active=true\r\n\r\n        for(let index=0;index<this.weapons.length;index++){\r\n            let _item=cc.instantiate(this.weaponItem)\r\n            \r\n            if(index==0){\r\n                _item.getChildByName('default').active=true\r\n                _item.getComponent(cc.Toggle).isChecked=true\r\n            } \r\n\r\n            _item.getChildByName('weaponAltar').getComponent(cc.Sprite).spriteFrame=this.heroSPA.getSpriteFrame('gun_'+index)\r\n            _item.getChildByName('gunLevel').getComponent(cc.Sprite).spriteFrame=this.heroSPA.getSpriteFrame('gunLevel1')\r\n            _item.active=true\r\n            cc.log(_item.getComponent(cc.Button))\r\n            _item.getComponent(cc.Button).clickEvents[0].customEventData=index.toString()\r\n            \r\n            _item.parent=cc.find(\"choiceWeapon/view/content\",this.node)\r\n        }\r\n        \r\n    }\r\n\r\n    /**\r\n     * 初始化英雄展示 默认第一个英雄\r\n     * @name 英雄名\r\n     */\r\n    initContraShow(name) {\r\n        let path = playerRes[name].aniPath\r\n        let self = this;\r\n        cc.loader.loadRes(path, sp.SkeletonData, function (err, _SkeletonData) {\r\n            if (err) {\r\n                cc.error(err.message || err);\r\n                return;\r\n            }\r\n            else {\r\n                //cc.log(_SkeletonData)\r\n                self.contraShow.skeletonData = _SkeletonData\r\n                self.playApproachAni()\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 英雄入场动画 从上方旋转一身后站着变成等候动画\r\n     */\r\n\r\n    playApproachAni() {\r\n        \r\n\r\n        this.contraNode.setPosition(0, 100)\r\n        this.contraNode.setRotation(0)\r\n\r\n        let approachTime=1;\r\n        this.contraShow.setMix('idle', 'roll2', 0.2);\r\n        this.node.getChildByName('light').active=false\r\n\r\n        this.scheduleOnce(()=>{\r\n            this.node.getChildByName('light').active=true\r\n            this.isClickedApproachAni=true\r\n        },approachTime)\r\n\r\n        this.contraShow.setAnimation(0, 'roll2', true)\r\n        this.contraShow.addAnimation(0, 'idle', true, approachTime)\r\n        \r\n        \r\n        this.contraNode.runAction(cc.spawn(cc.rotateBy(approachTime, 360), cc.moveTo(approachTime, cc.v2(0, -290)).easing(cc.easeIn(approachTime))))\r\n        this.contraShow.setSkin('gun0')\r\n    }\r\n    \r\n    private isClickedApproachAni:boolean=true\r\n    clickSwithcHero(event,customEventData){\r\n        //防止短时间多次点击\r\n        if(!this.isClickedApproachAni) return;\r\n        this.isClickedApproachAni=false\r\n\r\n        this.initContraShow(customEventData)\r\n    }\r\n\r\n    clickSwithcWeapon(event,customEventData){\r\n        let gunName='gun'+customEventData\r\n        this.contraShow.setSkin(gunName)\r\n    }\r\n    start() {\r\n\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}