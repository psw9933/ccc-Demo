{"version":3,"sources":["Player.js"],"names":["cc","Class","extends","Component","properties","moveDir","default","v2","displayName","tooltip","_speedType","SpeedType","STOP","type","_moveSpeed","stopSpeed","Integer","normalSpeed","fastSpeed","move","node","rotation","misc","radiansToDegrees","Math","atan2","y","x","newPos","position","add","mul","setPosition","update","dt","NORMAL","FAST"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;AAEPC,cAAY;;AAEV;AACAC,aAAS;AACPC,eAASN,GAAGO,EAAH,CAAM,CAAN,EAAS,CAAT,CADF;AAEPC,mBAAa,UAFN;AAGPC,eAAS;AAHF,KAHC;AAQVC,gBAAY;AACVJ,eAASK,0BAAUC,IADT;AAEVJ,mBAAa,YAFH;AAGVK,YAAMF,yBAHI;AAIVF,eAAS;AAJC,KARF;;AAeV;AACAK,gBAAY;AACVR,eAAS,CADC;AAEVE,mBAAa,YAFH;AAGVC,eAAS;AAHC,KAhBF;;AAsBVM,eAAW;AACTT,eAAS,CADA;AAETO,YAAMb,GAAGgB,OAFA;AAGTP,eAAS;AAHA,KAtBD;AA2BVQ,iBAAa;AACXX,eAAS,GADE;AAEXO,YAAMb,GAAGgB,OAFE;AAGXP,eAAS;AAHE,KA3BH;AAgCVS,eAAW;AACTZ,eAAS,GADA;AAETO,YAAMb,GAAGgB,OAFA;AAGTP,eAAS;AAHA;;AAhCD,GAFL;;AA0CP;AACAU,MA3CO,kBA2CC;AACN,SAAKC,IAAL,CAAUC,QAAV,GAAqB,KAAKrB,GAAGsB,IAAH,CAAQC,gBAAR,CACxBC,KAAKC,KAAL,CAAW,KAAKpB,OAAL,CAAaqB,CAAxB,EAA2B,KAAKrB,OAAL,CAAasB,CAAxC,CADwB,CAA1B;AAGA,QAAIC,SAAS,KAAKR,IAAL,CAAUS,QAAV,CAAmBC,GAAnB,CAAuB,KAAKzB,OAAL,CAAa0B,GAAb,CAAiB,KAAKjB,UAAL,GAAkB,EAAnC,CAAvB,CAAb;AACA,SAAKM,IAAL,CAAUY,WAAV,CAAsBJ,MAAtB;AACD,GAjDM;AAmDPK,QAnDO,kBAmDCC,EAnDD,EAmDK;AACV,YAAQ,KAAKxB,UAAb;AACE,WAAKC,0BAAUC,IAAf;AACE,aAAKE,UAAL,GAAkB,KAAKC,SAAvB;AACA;AACF,WAAKJ,0BAAUwB,MAAf;AACE,aAAKrB,UAAL,GAAkB,KAAKG,WAAvB;AACA;AACF,WAAKN,0BAAUyB,IAAf;AACE,aAAKtB,UAAL,GAAkB,KAAKI,SAAvB;AACA;AACF;AACE;AAXJ;AAaA,SAAKC,IAAL;AACA;AACA;AACD;AApEM,CAAT","file":"Player.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\hall\\joystick\\script","sourcesContent":["import { SpeedType } from 'JoystickCommon'\n\ncc.Class({\n  extends: cc.Component,\n  properties: {\n\n    // from joystick\n    moveDir: {\n      default: cc.v2(0, 1),\n      displayName: 'Move Dir',\n      tooltip: '移动方向',\n    },\n    _speedType: {\n      default: SpeedType.STOP,\n      displayName: 'Speed Type',\n      type: SpeedType,\n      tooltip: '速度级别'\n    },\n\n    // from self\n    _moveSpeed: {\n      default: 0,\n      displayName: 'Move Speed',\n      tooltip: '移动速度'\n    },\n\n    stopSpeed: {\n      default: 0,\n      type: cc.Integer,\n      tooltip: '停止时速度'\n    },\n    normalSpeed: {\n      default: 100,\n      type: cc.Integer,\n      tooltip: '正常速度'\n    },\n    fastSpeed: {\n      default: 200,\n      type: cc.Integer,\n      tooltip: '最快速度'\n    }\n\n  },\n\n  // methods\n  move () {\n    this.node.rotation = 90 - cc.misc.radiansToDegrees(\n      Math.atan2(this.moveDir.y, this.moveDir.x)\n    );\n    let newPos = this.node.position.add(this.moveDir.mul(this._moveSpeed / 60));\n    this.node.setPosition(newPos);\n  },\n\n  update (dt) {\n    switch (this._speedType) {\n      case SpeedType.STOP:\n        this._moveSpeed = this.stopSpeed;\n        break;\n      case SpeedType.NORMAL:\n        this._moveSpeed = this.normalSpeed;\n        break;\n      case SpeedType.FAST:\n        this._moveSpeed = this.fastSpeed;\n        break;\n      default:\n        break;\n    }\n    this.move();\n    // console.log(this.moveDir)\n    // console.log(this._moveSpeed)\n  },\n});\n"]}