{"version":3,"sources":["ManagerNotice.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\module","sourcesContent":["class ManagerNotice {\r\n    \r\n    private static m_instance: ManagerNotice = null\r\n    static getInstance(): ManagerNotice {\r\n        if (!ManagerNotice.m_instance)\r\n            ManagerNotice.m_instance = new ManagerNotice()\r\n        return ManagerNotice.m_instance;\r\n    }\r\n\r\n    private item: cc.Node = null\r\n    private childNode: cc.Node = null\r\n    constructor() {\r\n        \r\n        \r\n        cc.game.addPersistRootNode(cc.find('Canvas/noticeManager'))\r\n        this.initEvent()\r\n\r\n        this.childNode = cc.find('Canvas/noticeManager/child')\r\n        let item = cc.find('Canvas/noticeManager/item')\r\n\r\n        this.item = cc.instantiate(item)\r\n        this.item.active = true\r\n    }\r\n    /** \r\n     * 注册事件\r\n     */\r\n    private initEvent() {\r\n        \r\n    }\r\n    /**\r\n     * 注销事件\r\n     */\r\n    private clearEvent() {\r\n        \r\n    }\r\n    initNode(){\r\n        \r\n    }\r\n\r\n    \r\n    clear() {\r\n        cc.game.removePersistRootNode(cc.find('Canvas/noticeManager'))\r\n        this.clearEvent()\r\n        ManagerNotice.m_instance = null\r\n    }\r\n\r\n    show(str: string, itemPrefab?: cc.Node)\r\n    show(str: string, itemPrefab?: cc.Prefab)\r\n    show(str: string, itemPrefab?: any) {\r\n\r\n \r\n\r\n        let managerNode = cc.find('Canvas/noticeManager')\r\n        // managerNode.width = cc.find('Canvas').width\r\n        // managerNode.height =cc.find('Canvas').height\r\n        managerNode.setPosition(0,cc.find('Canvas').height/4);\r\n        // cc.log(managerNode.getPosition())\r\n        if (itemPrefab == undefined) itemPrefab = this.item\r\n\r\n        let indexcount = 0\r\n        if (this.childNode.childrenCount > 3) {\r\n            indexcount = this.childNode.childrenCount - 3;\r\n            for (let childNode of this.childNode.children) {\r\n                indexcount--;\r\n                childNode.runAction(cc.fadeOut(0.25))\r\n                if (indexcount <= 0) break;\r\n            }\r\n        }\r\n\r\n        for (let childNode of this.childNode.children) {\r\n            childNode.runAction(cc.moveBy(0.3, cc.v2(0, 80)));\r\n        }\r\n        let itemNode = null\r\n        if (itemPrefab) itemNode = cc.instantiate(itemPrefab)\r\n        else itemNode = cc.instantiate(this.item)\r\n        itemNode.getChildByName('lb').on('size-changed', function () {\r\n            if (this.width > this.parent.width)\r\n                this.parent.width = this.width + 40\r\n        }.bind(itemNode))\r\n        itemNode.getChildByName('lb').getComponent(cc.Label).string = str\r\n        itemNode.parent = this.childNode\r\n        itemNode.opacity = 0;\r\n        if (this.childNode.childrenCount == 1) {\r\n            itemNode.runAction(cc.sequence(\r\n                cc.fadeIn(0.2),\r\n                cc.delayTime(1),\r\n                cc.fadeOut(0.5),\r\n                cc.callFunc((target) => {\r\n                    target.destroy()\r\n                })\r\n            ))\r\n        }\r\n        else {\r\n            itemNode.runAction(cc.sequence(\r\n                cc.delayTime(0.3),\r\n                cc.fadeIn(0.2),\r\n                cc.delayTime(1),\r\n                cc.fadeOut(0.5),\r\n                cc.callFunc((target) => {\r\n                    target.destroy()\r\n                })\r\n            ))\r\n        }\r\n    }\r\n}\r\n\r\nexport { ManagerNotice }"]}