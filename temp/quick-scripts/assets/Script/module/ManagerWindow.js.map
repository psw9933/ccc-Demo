{"version":3,"sources":["ManagerWindow.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\module","sourcesContent":["class ManagerWindow {\r\n    private managerNode: cc.Node = null\r\n    private bg: cc.Node = null\r\n    private children: cc.Node[] = []\r\n    private static m_instance: ManagerWindow = null\r\n    constructor() {\r\n        this.managerNode = cc.find('Canvas/WindowManager')\r\n        cc.game.addPersistRootNode(this.managerNode)\r\n        this.bg = this.managerNode.getChildByName('bg')\r\n        this.bg.active = false\r\n        this.initEvent()\r\n    }\r\n    /**\r\n     * 注册事件\r\n     */\r\n    private initEvent() {\r\n       \r\n    }\r\n    /**\r\n     * 注销事件\r\n     */\r\n    private clearEvent() {\r\n       \r\n    }\r\n\r\n    clear() {\r\n        cc.game.removePersistRootNode(this.managerNode)\r\n        this.clearEvent()\r\n        ManagerWindow.m_instance = null\r\n    }\r\n\r\n    static getInstance(): ManagerWindow {\r\n        if (!ManagerWindow.m_instance)\r\n            ManagerWindow.m_instance = new ManagerWindow()\r\n        return ManagerWindow.m_instance;\r\n    }\r\n\r\n    /**\r\n     * ManagerWindow show\r\n     * @param prefab 预制或者节点\r\n     */\r\n    show(prefab: cc.Prefab, data?): cc.Node\r\n    show(prefab: cc.Node, data?): cc.Node\r\n    show(prefab, data?): cc.Node {\r\n        this.bg.width = cc.find('Canvas').width\r\n        this.bg.height = cc.find('Canvas').height\r\n        // this.managerNode.x = cc.find('Canvas').width / 2\r\n        // this.managerNode.y = cc.find('Canvas').height / 2\r\n        this.bg.active = true;\r\n        let node = cc.instantiate(prefab)\r\n\r\n        if (data) {\r\n            node.attr({\r\n                customEventData: data\r\n            })\r\n        }\r\n        this.children.push(node)\r\n        //this.bg.zIndex = this.children.length\r\n        node.parent = this.managerNode//this.managerNode\r\n        //node.zIndex = this.children.length\r\n\r\n        //node.runAction(cc.scaleTo(0.1, 1))\r\n        //node.runAction(cc.fadeTo(0.1, 255))\r\n        node.runAction(cc.rotateTo(0.1, 0,0).easing(cc.easeBackOut()));\r\n        //node.runAction(cc.moveTo(0.2, 0,0).easing(cc.easeIn(1.2)));\r\n\r\n        return node\r\n    }\r\n    /**\r\n     * 移除最上层\r\n     */\r\n    pop() {\r\n        if (this.children.length == 0) {\r\n            this.bg.active = false\r\n            return\r\n        }\r\n        let node = this.children.pop()\r\n        node.removeFromParent()\r\n        this.bg.zIndex = this.children.length - 1\r\n        if (this.children.length == 0) this.bg.active = false\r\n        node.destroy()\r\n        return\r\n    }\r\n\r\n    /**\r\n     * 清空弹窗\r\n     */\r\n    removeAll() {\r\n        while (this.children.length) {\r\n            this.pop();\r\n        }\r\n      \r\n    }\r\n}\r\n\r\n\r\nexport { ManagerWindow }"]}